{% extends 'base.html' %}
{# This top line allows this template to utilizing the styling and layout from the base. All your templates should do the same. #}

{% block title %} Customer Account Page {% endblock %}

{% block header %} {{ user.username }}'s Account Details'  {% endblock %}

{% block content %}
  <!-- Go here if customer logged in -->
  {% if user.is_authenticated %}
  <div class="container-fluid m-3">

    <h3 class="mb-5">Your Current Balance is:  ${{ logged_in_customer.balance }}</h3>

    <div class="container">
        <dl>
          <div class="row">
            <div class="col-sm-4">
              <dt>Name:</dt>
            </div>
            <div class="col-sm-4">
              <dd>{{ logged_in_customer.name}}</dd><br>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-4">
              <dt>Street Address:</dt>
            </div>
            <div class="col-sm-4">
              <dd>{{ logged_in_customer.address }}</dd><br>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-4">
              <dt>Zip Code:</dt>
            </div>
            <div class="col-sm-4">
              <dd>{{ logged_in_customer.zipcode }}</dd><br>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-4">
              <dt>Your weekly Pick Up Day is:</dt>
            </div>
            <div class="col-sm-4">
              <dd>{{ logged_in_customer.pickup_day }}</dd><br>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-4">
              <dt>Pickup Suspension Period:</dt>
            </div>
            <div class="col-sm-4">
              <dd>{{ logged_in_customer.suspend_start }} to {{ logged_in_customer.suspend_end }}</dd><br>
            </div>
          </div>


            <dl>
              <div class="row">
                <div class="col-sm-4">
                  <dt>Special Pickup Date(s):</dt>
                </div>
                <div class="col-sm-4">
                  <!-- This for loop queries the special pickup dates db -->
                  {% for special_date in all_special_dates %}
                  <dd>
                    {% if special_date.customer == logged_in_customer %}
                      {{ special_date.special_pickup_date }} 
                    {% endif %}
                  </dd>
                  {% endfor %}
              <br>
                </div>
              </div>
            </dl>
          <div class="row">
            <div class="col-sm-4">
              <dt>(Click to add a special pickup date)</dt>
            </div>
            <div class="col-sm-4">
              <dd><a href="{% url 'customers:special_pickup_date' %}"  class="btn btn-success text-uppercase">Add Special Pickup</a></dd><br>
            </div>
          </div>
        </dl>

        <a href="{% url 'customers:index' %}"  class="btn btn-primary text-uppercase">Back</a>
    </div>
  </div>

  <!-- If user not logged in -->
  {% else %}
    <p>You are at the customer index, but you are not logged in.</p>
    <a href="{% url 'login' %}">Log In</a>
    <a href="{% url 'accounts:register' %}">Sign Up</a>
  {% endif %}
{% endblock %}