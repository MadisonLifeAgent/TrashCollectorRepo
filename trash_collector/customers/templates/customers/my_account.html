{% extends 'base.html' %}
{# This top line allows this template to utilizing the styling and layout from the base. All your templates should do the same. #}

{% block title %} Customer Account Page {% endblock %}

{% block header %} {{ user.username }}'s Account Details'  {% endblock %}

{% block content %}
  <!-- Go here if customer logged in -->
  {% if user.is_authenticated %}
  <div class="container-fluid p-4">

    <h3>Your Current Balance is:  ${{ logged_in_customer.balance }}</h3>
      <dl>
          <dt>Name:</dt>
            <dd>{{ logged_in_customer.name}}</dd><br>
          <dt>Street Address:</dt>
            <dd>{{ logged_in_customer.address }}</dd><br>
          <dt>Zip Code:</dt>
            <dd>{{ logged_in_customer.zipcode }}</dd><br>
          <dt>Your weekly Pick Up Day is:</dt>
            <dd>{{ logged_in_customer.pickup_day }}</dd><br>
          <dt>Suspend Pickup Dates:</dt>
            <dd>{{ logged_in_customer.suspend_start }} to {{ logged_in_customer.suspend_end }}</dd><br>

          <dl>
            <dt>Special Pickup Date(s):</dt>
                <!-- This for loop queries the special pickup dates db -->
                {% for special_date in all_special_dates %}
                <dd>

                  {% if special_date.customer == logged_in_customer %}
                    {{ special_date.special_pickup_date }} 
                  {% endif %}
                </dd>
                {% endfor %}
            <br>
            (Click button to add a special pickup date)
          </dl>

          <a href="{% url 'customers:special_pickup_date' %}"  class="btn btn-success">Add Special Pickup</a>
      </dl>

      <a href="{% url 'customers:index' %}"  class="btn btn-primary">Back</a>
    </div>

  <!-- If user not logged in -->
  {% else %}
    <p>You are at the customer index, but you are not logged in.</p>
    <a href="{% url 'login' %}">Log In</a>
    <a href="{% url 'accounts:register' %}">Sign Up</a>
  {% endif %}
{% endblock %}