{% extends 'base.html' %}
{# This top line allows this template to utilizing the styling and layout from the base. All your templates should do the same. #}

{% block title %} Customer Detail Page {% endblock %}

{% block header %} {{ customer.name }}'s Account Details  {% endblock %}

{% block content %}
  <!-- Go here if customer logged in -->
  {% if user.is_authenticated %}
  <div class="container-fluid m-3">

    <h3 class="container-fluid row ms-1 mb-5 p-3 rounded bg-warning col-sm-7">Current Balance:  ${{ customer.balance }}</h3>

    <div class="container-fluid">
        <div class="row col-sm-12 col-md-12">
            <div class="col-sm-12 col-md-8">
                <div class="row mb-2">
                    <dt class="col-sm-3 m-1 bg-success rounded border-end border-light text-white text-center p-1">Name:</dt>
                        <dd class="col-sm-4 m-1 bg-primary rounded text-white fw-bold text-center p-1">{{ customer.name}}</dd><br>
                </div>

                <div class="row mb-2">
                    <dt class="col-sm-3 m-1 bg-success rounded border-end border-light text-white text-center p-1">Street Address:</dt>
                        <dd class="col-sm-4 m-1 bg-primary rounded text-white fw-bold text-center p-1">{{ customer.address }}</dd><br>
                </div>

                <div class="row mb-2">
                    <dt class="col-sm-3 m-1 bg-success rounded border-end border-light text-white text-center p-1">Zip Code:</dt>
                        <dd class="col-sm-4 m-1 bg-primary rounded text-white fw-bold text-center p-1">{{ customer.zipcode }}</dd><br>
                </div>

                <div class="row mb-2">
                    <dt class="col-sm-3 m-1 bg-success rounded border-end border-light text-white text-center p-1">Weekly Pick Up Day:</dt>
                        <dd class="col-sm-4 m-1 bg-primary rounded text-white fw-bold text-center p-1">{{ customer.pickup_day }}</dd><br>
                </div>

                <div class="row mb-2">
                    <dt class="col-sm-3 m-1 bg-success rounded border-end border-light text-white text-center p-1">Pickup Suspension Period:</dt>
                        <dd class="col-sm-4 m-1 bg-primary rounded text-white fw-bold text-center p-1">{{ customer.suspend_start }} to {{ customer.suspend_end }}</dd><br>
                </div>
                <dl>
                    <div class="row mb-2">
                        <dt class="col-sm-3 m-1 bg-success rounded border-end border-light text-white text-center p-1">Special Pickup Date(s):</dt>
                        <div class="col-sm-4 m-1 bg-primary rounded text-white fw-bold text-center p-1">
                            <!-- This for loop queries the special pickup dates db -->
                            {% for pickup in additional_pickups %}
                            <dd> {{ pickup.special_pickup_date }} </dd>
                            {% endfor %}
                        </div>
                    </div>
                </dl>
            </div>
            <div class="col-sm-12 col-md-4 embed-responsive embed-responsive-1by1">
                <iframe class="embed-responsive-item h-100" title="customer_addres_map" src="{{api_url}}" allowfullscreen></iframe>
            </div>
        </div>


        

        <a href="{% url 'employees:index' %}"  class="btn btn-primary text-uppercase">Back</a>
    </div>
  </div>

  <!-- If user not logged in -->
  {% else %}
    <p>You are at the customer index, but you are not logged in.</p>
    <a href="{% url 'login' %}">Log In</a>
    <a href="{% url 'accounts:register' %}">Sign Up</a>
  {% endif %}
{% endblock %}